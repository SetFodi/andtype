<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com;">
  <title>AndType</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="loader-content">
      <div class="loading-text">
        <span class="loading-char">A</span>
        <span class="loading-char">n</span>
        <span class="loading-char">d</span>
        <span class="loading-char">T</span>
        <span class="loading-char">y</span>
        <span class="loading-char">p</span>
        <span class="loading-char">e</span>
      </div>
      <div class="loading-bar-wrapper">
        <div class="loading-bar"></div>
      </div>
    </div>
  </div>

  <!-- Custom Title Bar -->
  <div class="title-bar">
    <div class="title-bar-drag">
      <div class="app-logo">
        <img src="andtype.png" alt="AndType" class="logo-image">
        <span class="app-name">AndType</span>
      </div>
    </div>
    <div class="window-controls">
      <button class="window-btn minimize" id="win-min">
        <svg viewBox="0 0 12 12">
          <rect y="5" width="12" height="2" fill="currentColor" />
        </svg>
      </button>
      <button class="window-btn maximize" id="win-max">
        <svg viewBox="0 0 12 12">
          <rect x="1" y="1" width="10" height="10" fill="none" stroke="currentColor" stroke-width="1.5" />
        </svg>
      </button>
      <button class="window-btn close" id="win-close">
        <svg viewBox="0 0 12 12">
          <path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Header with Stats -->
    <header class="header">
      <div class="stats-container">
        <div class="stat-box" id="wpm-box">
          <span class="stat-value" id="wpm">0</span>
          <span class="stat-label">wpm</span>
        </div>
        <div class="stat-box" id="accuracy-box">
          <span class="stat-value" id="accuracy">100</span>
          <span class="stat-label">acc%</span>
        </div>
        <div class="stat-box" id="timer-box">
          <span class="stat-value" id="timer">30</span>
          <span class="stat-label">sec</span>
        </div>
      </div>
    </header>

    <!-- Mode Selector -->
    <div class="mode-selector">
      <div class="mode-group">
        <span class="mode-label">time</span>
        <button class="mode-btn" data-mode="time" data-value="15">15</button>
        <button class="mode-btn active" data-mode="time" data-value="30">30</button>
        <button class="mode-btn" data-mode="time" data-value="60">60</button>
        <button class="mode-btn" data-mode="time" data-value="120">120</button>
      </div>
      <div class="mode-divider"></div>
      <div class="mode-group">
        <span class="mode-label">words</span>
        <button class="mode-btn" data-mode="words" data-value="10">10</button>
        <button class="mode-btn" data-mode="words" data-value="25">25</button>
        <button class="mode-btn" data-mode="words" data-value="50">50</button>
        <button class="mode-btn" data-mode="words" data-value="100">100</button>
      </div>
      <div class="mode-divider"></div>
      <div class="theme-selector">
        <button class="theme-btn" id="theme-toggle" title="Change Theme">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5" />
            <path
              d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
          </svg>
        </button>
        <div class="theme-dropdown" id="theme-dropdown">
          <button class="theme-option active" data-theme="andromeda">
            <span class="theme-preview andromeda-preview"></span>
            <span>Andromeda</span>
          </button>
          <button class="theme-option" data-theme="aura">
            <span class="theme-preview aura-preview"></span>
            <span>Aura</span>
          </button>
          <button class="theme-option" data-theme="dracula">
            <span class="theme-preview dracula-preview"></span>
            <span>Dracula</span>
          </button>
          <button class="theme-option" data-theme="onedark">
            <span class="theme-preview onedark-preview"></span>
            <span>One Dark</span>
          </button>
          <button class="theme-option" data-theme="nord">
            <span class="theme-preview nord-preview"></span>
            <span>Nord</span>
          </button>
          <button class="theme-option" data-theme="synthwave">
            <span class="theme-preview synthwave-preview"></span>
            <span>Synthwave</span>
          </button>
          <button class="theme-option" data-theme="monokai">
            <span class="theme-preview monokai-preview"></span>
            <span>Monokai</span>
          </button>
          <button class="theme-option" data-theme="gruvbox">
            <span class="theme-preview gruvbox-preview"></span>
            <span>Gruvbox</span>
          </button>
        </div>
      </div>
      <div class="mode-divider"></div>
      <button class="theme-btn" id="profile-btn" title="View Stats">
        <!-- User Icon (Standard Outline) -->
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
      </button>
    </div>

    <!-- Typing Area -->
    <div class="typing-container">
      <div class="words-wrapper">
        <div class="caret" id="caret"></div>
        <div class="words" id="words"></div>
      </div>
      <input type="text" id="input-field" class="hidden-input" autocomplete="off" autocorrect="off" autocapitalize="off"
        spellcheck="false">
    </div>

    <!-- Restart Button -->
    <div class="restart-container">
      <button class="restart-btn" id="restart-btn" title="Restart Test (Tab + Enter)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 4v6h6" />
          <path d="M23 20v-6h-6" />
          <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" />
        </svg>
      </button>
    </div>

    <!-- Virtual Keyboard -->
    <div class="keyboard-container">
      <div class="keyboard">
        <div class="keyboard-row">
          <div class="key" data-key="q">q</div>
          <div class="key" data-key="w">w</div>
          <div class="key" data-key="e">e</div>
          <div class="key" data-key="r">r</div>
          <div class="key" data-key="t">t</div>
          <div class="key" data-key="y">y</div>
          <div class="key" data-key="u">u</div>
          <div class="key" data-key="i">i</div>
          <div class="key" data-key="o">o</div>
          <div class="key" data-key="p">p</div>
          <div class="key" data-key="[">[</div>
          <div class="key" data-key="]">]</div>
        </div>
        <div class="keyboard-row">
          <div class="key" data-key="a">a</div>
          <div class="key" data-key="s">s</div>
          <div class="key" data-key="d">d</div>
          <div class="key" data-key="f">f</div>
          <div class="key" data-key="g">g</div>
          <div class="key" data-key="h">h</div>
          <div class="key" data-key="j">j</div>
          <div class="key" data-key="k">k</div>
          <div class="key" data-key="l">l</div>
          <div class="key" data-key=";">;</div>
          <div class="key" data-key="'">'</div>
        </div>
        <div class="keyboard-row">
          <div class="key" data-key="z">z</div>
          <div class="key" data-key="x">x</div>
          <div class="key" data-key="c">c</div>
          <div class="key" data-key="v">v</div>
          <div class="key" data-key="b">b</div>
          <div class="key" data-key="n">n</div>
          <div class="key" data-key="m">m</div>
          <div class="key" data-key=",">,</div>
          <div class="key" data-key=".">.</div>
          <div class="key" data-key="/">/</div>
        </div>
        <div class="keyboard-row">
          <div class="key space-key" data-key=" ">space</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Results Modal -->
  <div class="modal-overlay" id="results-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Test Complete!</h2>
        <div class="modal-decoration"></div>
      </div>
      <div class="results-grid">
        <div class="result-card main-result">
          <span class="result-value" id="final-wpm">0</span>
          <span class="result-label">words per minute</span>
        </div>
        <div class="result-card">
          <span class="result-value" id="final-accuracy">0</span>
          <span class="result-label">accuracy</span>
        </div>
        <div class="result-card">
          <span class="result-value" id="final-chars">0/0</span>
          <span class="result-label">correct/total</span>
        </div>
        <div class="result-card">
          <span class="result-value" id="final-time">0s</span>
          <span class="result-label">time</span>
        </div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn primary" id="restart-modal-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 4v6h6" />
            <path d="M23 20v-6h-6" />
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" />
          </svg>
          Try Again
        </button>
      </div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div class="modal-overlay" id="profile-modal">
    <div class="modal profile-modal-content">
      <div class="modal-header profile-header">
        <h2>
          <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor" stroke="none">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" />
          </svg>
          User Profile
        </h2>
        <button class="close-modal-btn" id="close-profile-btn" title="Close">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="profile-scroll-area">
        <div class="profile-grid">
          <!-- Overview Stats -->
          <div class="profile-card overview-card">
            <div class="stat-group">
              <span class="p-value" id="p-tests">0</span>
              <span class="p-label">Tests</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-group">
              <span class="p-value highlight" id="p-best-wpm">0</span>
              <span class="p-label">Best WPM</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-group">
              <span class="p-value" id="p-avg-wpm">0</span>
              <span class="p-label">Avg WPM</span>
            </div>
          </div>

          <!-- History -->
          <div class="profile-card history-card">
            <h3>Run History</h3>
            <div class="history-list" id="p-history-list">
              <div class="history-placeholder">No records yet</div>
            </div>
          </div>

          <!-- Weak Keys -->
          <div class="profile-card keys-card">
            <h3>Needs Improvement</h3>
            <div class="weak-keys-list" id="p-weak-keys">
              <span class="weak-key-placeholder">Practice more to see data</span>
            </div>
          </div>

          <!-- Danger Zone -->
          <div style="text-align: right; margin-top: 1rem;">
            <button id="reset-stats-btn"
              style="background: transparent; border: 1px solid var(--error-color); color: var(--error-color); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.8rem; transition: all 0.2s;">
              Reset Statistics
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom Confirmation Modal -->
  <div class="modal-overlay" id="confirm-modal">
    <div class="modal confirm-modal-content">
      <div class="modal-header">
        <h2 style="color: var(--error-color); font-size: 1.5rem;">Reset Statistics?</h2>
      </div>
      <div class="confirm-body" style="margin-bottom: 2rem; color: var(--sub-color);">
        <p>Are you sure you want to delete all your progress?</p>
        <p style="font-size: 0.9rem; opacity: 0.8;">This action cannot be undone.</p>
      </div>
      <div class="modal-actions" style="gap: 1rem; justify-content: center;">
        <button class="modal-btn" id="cancel-reset-btn" style="border-color: var(--sub-color);">Cancel</button>
        <button class="modal-btn" id="confirm-reset-btn"
          style="background: var(--error-color); color: #fff; border-color: var(--error-color);">Yes, Reset</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>

</html>